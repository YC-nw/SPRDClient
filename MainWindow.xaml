<ui:FluentWindow
    x:Class="SPRDClient.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:SPRDClient"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Width="300"
    Height="600"
    Background="Transparent"
    ExtendsContentIntoTitleBar="True"
    Loaded="FluentWindow_Loaded"
    WindowCornerPreference="Round"
    mc:Ignorable="d">
    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Offset="0.0" Color="Pink" />
                <GradientStop Offset="0.5" Color="Wheat" />
                <GradientStop Offset="1.0" Color="LightBlue" />
            </LinearGradientBrush>
        </Grid.Background>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <ui:TextBlock
            Grid.Row="1"
            HorizontalAlignment="Center"
            FontSize="20">
            <Run Text="作者：YC &amp;&amp; la1N" />
            <LineBreak />
            <Run />
            <Run Language="zh-cn" Text="工具免费，倒卖私马！" />
        </ui:TextBlock>
        <ContentPresenter x:Name="RootContentDialogPresenter" />
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="40" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <ui:TitleBar
                x:Name="TitleBar1"
                Title="SPRDClient (工具免费) "
                FontSize="15" />
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <ui:TextBlock
                    x:Name="SprdTextBlock"
                    Margin="0,0,20,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    FontSize="25" />
                <ui:TextBlock
                    x:Name="StageTextBlock"
                    Grid.Column="1"
                    Margin="20,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    FontSize="25" />
            </Grid>

            <StackPanel
                x:Name="WaitingPanel"
                Grid.Row="2"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Style="{StaticResource AnimationPanelStyle}"
                Visibility="Visible">
                <ui:TextBlock
                    x:Name="WaitingLabel"
                    Margin="0,0,0,80"
                    FontSize="30"
                    FontWeight="Bold"
                    Text="等待设备连接中" />
                <ui:ToggleSwitch
                    Margin="10"
                    HorizontalAlignment="Center"
                    IsChecked="{Binding KickToAutodloader, UpdateSourceTrigger=PropertyChanged}">
                    <ui:TextBlock
                        Margin="7"
                        FontSize="18"
                        Text="进入Sprd4模式"
                        ToolTip="在没有fdl的情况下，可以开启此功能并在设备关机状态下直接连接设备以进入sprd4模式而不用发送fdl文件。 &#x0a;此功能在大部分展迅机型上正常工作，部分展迅设备可能会擦除splloader以进入sprd3，因此需谨慎使用。 &#x0a;较新的设备可尝试开启“单次模式”功能" />
                </ui:ToggleSwitch>
                <ui:ToggleSwitch
                    x:Name="KickModeToggle"
                    Margin="10"
                    HorizontalAlignment="Center"
                    IsChecked="{Binding boolKickMode, UpdateSourceTrigger=PropertyChanged}"
                    Visibility="Collapsed">
                    <ui:TextBlock
                        Margin="7"
                        FontSize="18"
                        Text="单次模式"
                        ToolTip="某些新展迅设备可能无法使用普通方法进入sprd4，可尝试开启此功能重试" />
                </ui:ToggleSwitch>
                <ui:ToggleSwitch
                    Margin="10"
                    HorizontalAlignment="Center"
                    IsChecked="{Binding EnableReconnectMode, UpdateSourceTrigger=PropertyChanged}">
                    <ui:TextBlock
                        Margin="10"
                        FontSize="18"
                        Text="重连模式" />
                    <ui:ToggleSwitch.ToolTip>
                        当设备从brom/fd1/fdl2模式断连时，可启用此项重新连接
                    </ui:ToggleSwitch.ToolTip>
                </ui:ToggleSwitch>
                <ui:ToggleSwitch
                    x:Name="AutoSendToggle"
                    HorizontalAlignment="Center"
                    IsChecked="{Binding AutoSend}"
                    Visibility="Collapsed">
                    <ui:TextBlock
                        Margin="10"
                        FontSize="18"
                        Text="自动发送fdl" />
                </ui:ToggleSwitch>
            </StackPanel>
            <ui:SnackbarPresenter
                x:Name="RootSnackbar"
                Grid.Row="2"
                HorizontalAlignment="Right"
                Opacity="0.9" />
            <StackPanel
                x:Name="ConnectedPanel"
                Grid.Row="2"
                Margin="20"
                VerticalAlignment="Top"
                Style="{StaticResource AnimationPanelStyle}"
                Visibility="Collapsed">

                <ui:TextBlock Text="FDL 文件路径" />
                <ui:TextBox
                    Height="35"
                    Margin="10"
                    AllowDrop="True"
                    Background="Transparent"
                    PlaceholderText="fdl文件路径(拖拽到此处)"
                    PreviewDragOver="TextBoxPreviewDragOver"
                    PreviewDrop="TextBoxPreviewDrop"
                    Text="{Binding FdlFilePath, UpdateSourceTrigger=PropertyChanged}" />

                <ui:TextBlock Text="FDL 文件地址" />
                <ui:TextBox
                    Height="35"
                    Margin="10"
                    Background="Transparent"
                    PlaceholderText="如0x5000"
                    Text="{Binding StrAddress}" />
                <ui:Button
                    x:Name="SendFdlButton"
                    Height="35"
                    Margin="10"
                    Click="SendFdlButton_Click"
                    Content="发送 FDL"
                    CornerRadius="10">
                    <ui:Button.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Offset="0.0" Color="Pink" />
                            <GradientStop Offset="1.0" Color="LightBlue" />
                        </LinearGradientBrush>
                    </ui:Button.Background>
                </ui:Button>
                <ui:ToggleSwitch Margin="10" IsChecked="{Binding AutoSendNextTime, UpdateSourceTrigger=PropertyChanged}">
                    <ui:TextBlock Text="下次自动发送FDL文件" />
                </ui:ToggleSwitch>
                <Grid>
                    <ui:ProgressRing
                        x:Name="ProgressRing1"
                        Margin="0,10,0,0"
                        IsIndeterminate="False"
                        Opacity="1"
                        Progress="0"
                        Visibility="Visible" />
                    <TextBlock
                        x:Name="ProgressText1"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Text="" />
                </Grid>
            </StackPanel>
            <Grid.Triggers>
                <EventTrigger RoutedEvent="Loaded">
                    <BeginStoryboard Storyboard="{StaticResource FadeInStoryboard}" />
                </EventTrigger>
            </Grid.Triggers>
        </Grid>
    </Grid>
</ui:FluentWindow>