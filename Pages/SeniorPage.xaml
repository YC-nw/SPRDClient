<Page
    x:Class="SPRDClient.Pages.SeniorPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:SPRDClient.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="高级功能"
    d:DesignHeight="600"
    d:DesignWidth="800"
    ScrollViewer.CanContentScroll="True"
    mc:Ignorable="d"
    Loaded="Page_Loaded">

    <Page.Resources>
        <Style x:Key="TextBlockStyle" TargetType="{x:Type ui:TextBlock}">
            <Setter Property="Margin" Value="5" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalAlignment" Value="Center" />
        </Style>
        <Style BasedOn="{StaticResource {x:Type ui:TextBox}}" TargetType="ui:TextBox">
            <Setter Property="Margin" Value="5" />
            <Setter Property="Padding" Value="5" />
            <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style BasedOn="{StaticResource {x:Type ui:Button}}" TargetType="ui:Button">
            <Setter Property="Margin" Value="10,5" />
            <Setter Property="Padding" Value="10,5" />
            <Setter Property="MinWidth" Value="100" />
            <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="10" />
            <Setter Property="Padding" Value="10" />
        </Style>
    </Page.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  读取分区区域  -->
        <Border
            Margin="5"
            CornerRadius="20"
            Opacity="0.3">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Offset="0.0" Color="MediumPurple" />
                    <GradientStop Offset="1.0" Color="IndianRed" />
                </LinearGradientBrush>
            </Border.Background>
            <Border.Effect>
                <BlurEffect Radius="8" />
            </Border.Effect>
        </Border>
        <Border
            Grid.Row="1"
            Margin="5"
            CornerRadius="20"
            Opacity="0.25">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Offset="0.0" Color="Blue" />
                    <GradientStop Offset="1.0" Color="LightGreen" />
                </LinearGradientBrush>
            </Border.Background>
            <Border.Effect>
                <BlurEffect Radius="8" />
            </Border.Effect>
        </Border>
        <Border
            Grid.Row="2"
            Margin="5"
            CornerRadius="20"
            Opacity="0.2">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Offset="0.0" Color="Firebrick" />
                    <GradientStop Offset="1.0" Color="Orange" />
                </LinearGradientBrush>
            </Border.Background>
            <Border.Effect>
                <BlurEffect Radius="8" />
            </Border.Effect>
        </Border>
        <GroupBox
            Grid.Row="0"
            Grid.ColumnSpan="2"
            Margin="10"
            BorderThickness="0"
            Header="读取分区">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <ui:TextBlock
                    Grid.Row="0"
                    Grid.Column="0"
                    Style="{StaticResource TextBlockStyle}"
                    Text="分区名称:" />
                <ui:TextBox
                    Grid.Row="0"
                    Grid.Column="1"
                    PlaceholderText="如system"
                    Text="{Binding ReadPartitionName, UpdateSourceTrigger=PropertyChanged}" />
                <ui:TextBlock
                    Grid.Row="0"
                    Grid.Column="2"
                    FontSize="15"
                    Style="{StaticResource TextBlockStyle}"
                    Text="{Binding PartMessage}" />
                <ui:TextBlock
                    Grid.Row="1"
                    Grid.Column="0"
                    Style="{StaticResource TextBlockStyle}"
                    Text="偏移量:" />
                <ui:TextBox
                    Grid.Row="1"
                    Grid.Column="1"
                    PlaceholderText="留空默认为0"
                    Text="{Binding ReadOffset, UpdateSourceTrigger=LostFocus}" />

                <ui:TextBlock
                    Grid.Row="2"
                    Grid.Column="0"
                    Style="{StaticResource TextBlockStyle}"
                    Text="读取大小:" />
                <ui:TextBox
                    Grid.Row="2"
                    Grid.Column="1"
                    PlaceholderText="留空即自动获取大小"
                    Text="{Binding ReadSize, UpdateSourceTrigger=PropertyChanged}" />

                <ui:TextBlock
                    Grid.Row="3"
                    Grid.Column="0"
                    Style="{StaticResource TextBlockStyle}"
                    Text="保存路径:" />
                <ui:TextBox
                    Grid.Row="3"
                    Grid.Column="1"
                    IsReadOnly="True"
                    PlaceholderText="路径"
                    Text="{Binding SaveFileDirectory}" />
                <ui:Button
                    Grid.Row="3"
                    Grid.Column="2"
                    Click="BrowserButton_Click"
                    Content="浏览..."
                    Tag="read"
                    ToolTip="选择保存目录" />

                <ui:Button
                    Grid.Row="4"
                    Grid.Column="1"
                    Grid.ColumnSpan="2"
                    HorizontalAlignment="Right"
                    Click="Button_Click"
                    Content="读取分区"
                    IsEnabled="{Binding PartExist, UpdateSourceTrigger=PropertyChanged}"
                    Tag="read"
                    ToolTip="从设备读取指定分区的数据" />
            </Grid>
        </GroupBox>

        <!--  写入分区区域  -->
        <GroupBox
            Grid.Row="1"
            Margin="10"
            BorderThickness="0"
            Header="写入分区">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <ui:TextBlock
                    Grid.Row="0"
                    Grid.Column="0"
                    Style="{StaticResource TextBlockStyle}"
                    Text="分区名称:" />
                <ui:TextBox
                    Grid.Row="0"
                    Grid.Column="1"
                    PlaceholderText="如system"
                    Text="{Binding WritePartitionName, UpdateSourceTrigger=LostFocus}" />
                <ui:TextBlock
                    Grid.Row="1"
                    Grid.Column="0"
                    Style="{StaticResource TextBlockStyle}"
                    Text="偏移量:" />
                <ui:TextBox
                    Grid.Row="1"
                    Grid.Column="1"
                    PlaceholderText="留空默认为0"
                    Text="{Binding WriteOffset, UpdateSourceTrigger=PropertyChanged}"
                    TextWrapping="NoWrap" />

                <ui:TextBlock
                    Grid.Row="2"
                    Grid.Column="0"
                    Style="{StaticResource TextBlockStyle}"
                    Text="镜像文件:" />
                <ui:TextBox
                    Grid.Row="2"
                    Grid.Column="1"
                    AllowDrop="True"
                    PlaceholderText="路径（拖拽到此处）"
                    PreviewDragOver="TextBox_DragOver"
                    PreviewDrop="TextBox_Drop"
                    Text="{Binding WriteImageFilePath}" />
                <ui:Button
                    Grid.Row="2"
                    Grid.Column="2"
                    Click="BrowserButton_Click"
                    Content="浏览..."
                    Tag="write"
                    ToolTip="选择刷机镜像文件" />

                <ui:Button
                    Grid.Row="4"
                    Grid.Column="1"
                    Grid.ColumnSpan="2"
                    HorizontalAlignment="Right"
                    Click="Button_Click"
                    Content="写入分区"
                    Tag="write"
                    ToolTip="将镜像文件写入设备分区" />
            </Grid>
        </GroupBox>
        <GroupBox
            Grid.Row="2"
            Margin="10"
            BorderThickness="0"
            Header="高级功能区">
            <!--  btn  -->
            <WrapPanel>
                <ui:Button Click="Button_Click_1" Content="重新分区" Tag="repartition"/>
                <ui:Button Click="Button_Click_1" IsEnabled ="{Binding IsUsingNewFdl2}" Content="禁用dm-verity" Tag="disable dm-verity"/>
                <ui:Button Click="Button_Click_1" IsEnabled ="{Binding IsUsingNewFdl2}" Content="启用dm-verity" Tag="enable dm-verity"/>
                <ui:Button Click="Button_Click_1" Content="开机进入recovery" Tag="recovery"/>
                <ui:Button Click="Button_Click_1" Content="开机进入fastbootd" Tag="fastbootd"/>
                <ui:Button Click="Button_Click_1" Content="开机恢复出厂设置" Tag="factory reset"/>
            </WrapPanel>
        </GroupBox>
        <!--  日志区域  -->
    </Grid>
</Page>